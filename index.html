<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Crmup: Continuos Delivery for Dynamics Crm Customisations</title>
</head>

<body>
    <div id="container">
        <div class="inner">

            <header>
                <h1>CrmUp</h1>
                <h2>CrmUp is a .NET library that will help you to very easily automate the deployment of your Dynamics Crm customisations.</h2>
                <h2>CrmUp uses a "change script" approach, which means it will apply only the appropriate customisations that are required in order to roll the target CRM system up to the current version. 
                    The "change scripts" are provided by you, in the form of "Dynamics Solution" files.
                </h2>
                <h2>CrmUp wants to take you to that special DevOps nirvana referred to as &quot;<strong></strong>Continuous Delivery&quot;. </h2>
                <h2>At the heart of CrmUp lies the popular <a href="http://dbup.github.io/">DbUp </a>library, and CrmUp extends <a href="http://dbup.github.io/">DbUp </a>in order to bring <a href="http://dbup.github.io/">DbUp's </a>philosophy to the realm of Microsoft Dynamics Crm.</h2>
                <small>The documentation that follows has been made consistent with <a href="http://dbup.github.io/">DbUp's</a>.</small>
            </header>
            <section id="downloads" class="clearfix">
                <a href="https://github.com/dazinator/CrmUp/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
                <a href="https://github.com/dazinator/CrmUp/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
                <a href="https://github.com/dazinator/CrmUp" id="view-on-github" class="button"><span>View on GitHub</span></a>
            </section>
            <hr>
            <section id="main_content">
                <article>
                    <h3>Getting Started</h3>

                    <p>Start by creating a simple C# console project in Visual Studio, and adding your Crm Solution files to it. From the properties window, mark them as Embedded Resources:</p>

                    <img src="images/add-solutions.png" alt="CrmUp Sample">

                    <p>Next, use NuGet to install the CrmUp package:</p>

                    <pre><code>Install-Package CrmUp</code></pre>

                    <p>Finally, in <code>Program.cs</code>, add the following code:</p>

                    <pre><code>
        static int Main(string[] args)
        {
            var connectionString = args.FirstOrDefault() 
                ?? "Url=http://crmurl:5555/orgname;Domain=domain; UserName=admin; Password=pasword;Timeout=00:10:00;";
            var upgrader =
               DeployChanges.To
                            .DynamicsCrmOrganisation(connectionString)
                            .WithSolutionsEmbeddedInAssembly(Assembly.GetExecutingAssembly())
                            .LogToConsole()
                            .Build();

            var result = upgrader.PerformUpgrade();

            if (!result.Successful)
            {

                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine(result.Error);
                Console.ResetColor();
                return -1;
            }

            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine("Success!");
            Console.ResetColor();
            return 0;

        }
}</code></pre>

                    <p>You now have a console application that can apply your Crm Solution files to a Dynamics Crm system in order to roll it up to the latest version! After running it, you'll see something like this:</p>

                    <img src="images/first-run.png" alt="First run - the scripts get executed">

                    <p>The next time you run it, you'll see:</p>

                    <img src="images/second-run.png" alt="Second run - the scripts have already been executed">

                    <h2>Why a console application?</h2>
                    <p>
                        For the philosophy behind this, please refer to <a href="http://dbup.github.io/">DbUp's documentation </a>: 
                    </p>

                    <h2>Journaling</h2>
                    <p>
                        By default, CrmUp creates a new entity in Crm, called "CrmUp Journal", and this is used to track the solutions / change scripts that have already been applied to the system. Before running, CrmUp checks these records to work out which solutions / change scripts should be skipped. After running, it inserts records into the journal to record the solutions / change scripts that have been applied.
                    </p>
                    <img src="images/schema-versions.png" alt="The Journal created by CrmUp">

                    <h2>Extensibility</h2>
                    <p>
                        CrmUp is just an extension for <a href="http://dbup.github.io/">DbUp </a>, please refer to <a href="http://dbup.github.io/">DbUp's </a>documentation if you have question regarding extensibility. 
                    </p>
                </article>
            </section>

            <footer>
                CrmUp is maintained by <a href="https://github.com/dazinator">dazinator</a><br>
                This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
            </footer>


        </div>
    </div>
</body>
</html>
